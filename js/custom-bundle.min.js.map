{"version":3,"sources":["main.js"],"names":["init","map","ymaps","Map","center","zoom","controls","balloonLayout","templateLayoutFactory","createClass","placemark","Placemark","hideIconOnBalloonOpen","balloonOffset","geoObjects","add","behaviors","disable","balloon","open","$","document","ready","goToCategory","e","currentCategory","currentTarget","closest","targetCategoryIndex","attr","targetCategory","addClass","animate","left","outerWidth","right","openProductModal","event","off","productInfo","productsData","filter","elem","id","getAttribute","popupMarkup","html","magnificPopup","items","type","inline","markup","mainClass","removalDelay","fixedContentPos","fixedBgPos","preventDefault","fullpage","anchors","menu","scrollOverflow","slidesNavigation","controlArrows","onLeave","index","nextIndex","direction","numberOfSections","length","contacts","arrowUp","console","log","removeClass","afterRender","afterResize","container","fitToViewport","slick","prevArrow","nextArrow","slidesToShow","slidesToScroll","infinite","midClick","on","allCategories","productName","description","photoUrl_img"],"mappings":"AAgNA,QAAAA,QACAC,IAAA,GAAAC,OAAAC,IAAA,OACAC,QAAA,UAAA,WACAC,KAAA,GACAC,aAGA,IAAAC,GAAAL,MAAAM,sBAAAC,YACA,8PAUAC,EAAA,GAAAR,OAAAS,WAAA,UAAA,eACAC,uBAAA,EACAL,cAAAA,EACAM,0BAGAZ,KAAAa,WAAAC,IAAAL,GACAT,IAAAe,UAAAC,QAAA,cACAP,EAAAQ,QAAAC,OA1OAC,EAAAC,UAAAC,MAAA,WAsEA,QAAAC,GAAAC,GACA,GAAAC,GAAAL,EAAAI,EAAAE,eAAAC,QAAA,qBACAC,EAAAR,EAAAI,EAAAE,eAAAG,KAAA,iBACAC,EAAAV,EAAA,aAAAQ,EAGAE,GAAAC,SAAA,OACAN,EAAAO,SAEAC,KAAA,IAAAR,EAAAS,aAAA,KACAC,MAAAV,EAAAS,aAAA,MACA,IAAA,SA4FA,QAAAE,GAAAC,GACAjB,EAAA,YAAAkB,IAAA,SAEA,IAAAC,GAAAC,EAAAC,OAAA,SAAAC,GACA,MAAAA,GAAAC,KAAAN,EAAAX,cAAAkB,aAAA,aAGAC,EAAAzB,EAAA,yBAAA0B,MAEA1B,GAAA2B,cAAA5B,MACA6B,MAAAT,EACAU,KAAA,SACAC,QACAC,OAAAN,GAEAO,UAAA,WACAC,aAAA,IACAC,iBAAA,EACAC,YAAA,IAMAlB,EAAAmB,iBAlMApC,EAAA,aAAAqC,UACAC,SAAA,MAAA,WAAA,GAAA,WAAA,MAAA,WAAA,QAAA,GAAA,YACAC,KAAA,OACAC,gBAAA,EACAC,kBAAA,EACAC,eAAA,EACAC,QAAA,SAAAC,EAAAC,EAAAC,GACA,GAAAC,GAAA/C,EAAA,sBAAAgD,OACAC,EAAAjD,EAAA,oBACAkD,EAAAlD,EAAA,YACA6C,KAAAE,GAAA,QAAAD,GACAK,QAAAC,IAAA,gBACAH,EAAAtC,SAAA,QACAuC,EAAAG,YAAA,WACAT,IAAAG,GAAA,MAAAD,IACAK,QAAAC,IAAA,sBACAH,EAAAI,YAAA,QACAH,EAAAvC,SAAA,YAGA2C,YAAA,WACAtD,EAAA,qBAAAqD,YAAA,QACArD,EAAA,oBAAAqD,YAAA,SAEAE,YAAA,WACA1E,IAAA2E,UAAAC,mBAMAzD,EAAA,qBAAA0D,OACAC,UAAA3D,EAAA,SACA4D,UAAA5D,EAAA,SACA6D,aAAA,EACAC,eAAA,EACAC,UAAA,IAGA/D,EAAA,qBAAA0D,OACAC,UAAA3D,EAAA,mBACA4D,UAAA5D,EAAA,mBACA6D,aAAA,EACAC,eAAA,EACAC,UAAA,IAIA/D,EAAA,oBAAA2B,eACAE,KAAA,QACAG,UAAA,WACAC,aAAA,MAGAjC,EAAA,iBAAA2B,eACAE,KAAA,QACAG,UAAA,WACAC,aAAA,MAGAjC,EAAA,kBAAA2B,eACAE,KAAA,SACAmC,UAAA,EACAhC,UAAA,WACAC,aAAA,MAkBAjC,EAAA,iBAAAiE,GAAA,QAAA,SAAA7D,GACAA,EAAAgC,iBACAjC,EAAAC,KAGAJ,EAAA,iBAAAiE,GAAA,QAAA,SAAA7D,GACAA,EAAAgC,gBACA,IAAA8B,GAAAlE,EAAA,oBACAA,GAAA,kBAAAY,SACAC,KAAA,MACAE,MAAA,OACA,IAAA,QAAA,WACAmD,EAAAb,YAAA,UAQA,IAAAjC,KAEAG,GAAA,WACA4C,YAAA,YACAC,YAAA,oNAIAC,aAAA,2CAuFArE,GAAA,qBAAAiE,GAAA,QAAAjD,KAKAlC,MAAAoB,MAAAtB,KACA,IAAAC","file":"custom-bundle.min.js","sourcesContent":["$(document).ready(function() {\r\n\r\n\t//Initialization of site scroll\r\n\t$('#fullpage').fullpage({\r\n\t\tanchors: ['top', 'products', '', 'projects', 'rok', 'services', 'rocks', '', 'contacts'],\r\n\t\tmenu: '#nav',\r\n\t\tscrollOverflow: true,\r\n\t\tslidesNavigation: false,\r\n\t\tcontrolArrows: false,\r\n\t\tonLeave: function (index, nextIndex, direction) {\r\n\t\t\tvar numberOfSections = $('#fullpage .section').length;\r\n\t\t\tvar contacts = $('.contacts-hidden');\r\n\t\t\tvar arrowUp = $('.arrow-up');\r\n\t\t\tif(nextIndex === numberOfSections && direction =='down') {\r\n\t\t\t\tconsole.log('last section');\r\n\t\t\t\tcontacts.addClass('hide');\r\n\t\t\t\tarrowUp.removeClass('hidden');\r\n\t\t\t} else if (index === numberOfSections && direction == 'up') {\r\n\t\t\t\tconsole.log('leave last section');\r\n\t\t\t\tcontacts.removeClass('hide');\r\n\t\t\t\tarrowUp.addClass('hidden');\r\n\t\t\t}\r\n\t\t}, \r\n\t\tafterRender: function () {\r\n\t\t\t$('.container__inner').removeClass('hide');\r\n\t\t\t$('.contacts__inner').removeClass('hide');\r\n\t\t},\r\n\t\tafterResize: function () {\r\n\t\t\tmap.container.fitToViewport();\r\n\t\t}\r\n\t});\r\n\r\n\t//Slider initialization\r\n\r\n\t$('.projects__slider').slick({\r\n\t\tprevArrow: $('.prev'),\r\n\t\tnextArrow: $('.next'),\r\n\t\tslidesToShow: 1,\r\n\t\tslidesToScroll: 1,\r\n\t\tinfinite: false\r\n\t});\r\n\r\n\t$('.services__slider').slick({\r\n\t\tprevArrow: $('.services__prev'),\r\n\t\tnextArrow: $('.services__next'),\r\n\t\tslidesToShow: 3,\r\n\t\tslidesToScroll: 1,\r\n\t\tinfinite: false\r\n\t});\r\n\r\n\t// Image popup\r\n\t$('.slider__content').magnificPopup({\r\n\t\ttype: 'image',\r\n\t\tmainClass: 'mfp-fade',\r\n\t\tremovalDelay: 300\r\n\t});\r\n\r\n\t$('.rocks__image').magnificPopup({\r\n\t\ttype: 'image',\r\n\t\tmainClass: 'mfp-fade',\r\n\t\tremovalDelay: 300\r\n\t});\r\n\r\n\t$('.callback-link').magnificPopup({\r\n\t\ttype: 'inline',\r\n\t\tmidClick: true,\r\n\t\tmainClass: 'mfp-fade',\r\n\t\tremovalDelay: 300\r\n\t});\r\n\r\n\tfunction goToCategory(e) {\r\n\t\tvar currentCategory = $(e.currentTarget).closest('.product-category');\r\n\t\tvar targetCategoryIndex = $(e.currentTarget).attr('data-category');\r\n\t\tvar targetCategory = $('#category-' + targetCategoryIndex);\r\n\r\n\r\n\t\ttargetCategory.addClass('top');\r\n\t\tcurrentCategory.animate(\r\n\t\t\t\t{\r\n\t\t\t\t\t'left': '-' + currentCategory.outerWidth() + 'px',\r\n\t\t\t\t\t'right': currentCategory.outerWidth() + 'px'\r\n\t\t\t\t}, 800, 'swing'\r\n\t\t);\r\n\t}\r\n\r\n\t$('.product-link').on('click', function(e) {\r\n\t\te.preventDefault();\r\n\t\tgoToCategory(e);\r\n\t});\r\n\r\n\t$('.go-home-link').on('click', function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar allCategories = $('.product-category');\r\n\t\t$('#category-home').animate({\r\n\t\t\t\t'left': '0px',\r\n\t\t\t\t'right': '0px'\r\n\t\t\t}, 800, 'swing', function () {\r\n\t\t\tallCategories.removeClass('top');\r\n\t\t\t}\r\n\t\t);\r\n\t});\r\n\r\n\r\n\t// POPUPS\r\n\r\n\tvar productsData = [\r\n\t\t{\r\n\t\t\tid: 'product1',\r\n\t\t\tproductName: 'Брусчатка',\r\n\t\t\tdescription: 'Мы объединили более 20 производственных площадок ' +\r\n\t\t\t'в 5 регионах России и распределяем на них заказы от типовой облицовочной ' +\r\n\t\t\t'продукции до эксклюзивных высокохудожественных изделий в зависимости от ' +\r\n\t\t\t'профиля завода.',\r\n\t\t\tphotoUrl_img: 'img/product-details/product-detail1.jpg',\r\n\t\t}\r\n\t];\r\n\r\n\t// пригодится для пхп\r\n\t/*var addEventListenerToForms = function () {\r\n\t\t$('.js-form').on('submit', function (e) {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tvar form = $(this);\r\n\t\t\tform.find(':submit').removeAttr('disabled');\r\n\r\n\t\t\tvar params = {};\r\n\r\n\t\t\tparams.phone = form.find('input[name=\"phone\"]').val();\r\n\t\t\tparams.formName = form.attr('data-source');\r\n\r\n\t\t\tif(form.find('input[name=\"email\"]').val()) {\r\n\t\t\t\tparams.email = form.find('input[name=\"email\"]').val();\r\n\t\t\t}\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\turl: $(form).attr('action'),\r\n\t\t\t\tdata: params,\r\n\t\t\t\tbeforeSend: function(data) { // сoбытиe дo oтпрaвки\r\n\t\t\t\t\tform.find('input[type=\"submit\"]').attr('disabled', 'disabled'); // нaпримeр, oтключим кнoпку, чтoбы нe жaли пo 100 рaз\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\tif (data.SUCCESS == 'Y') {\r\n\t\t\t\t\t\t$.magnificPopup.open({\r\n\t\t\t\t\t\t\tkey: 'success-popup',\r\n\t\t\t\t\t\t\titems: {\r\n\t\t\t\t\t\t\t\tsrc: '#success-send-popup',\r\n\t\t\t\t\t\t\t\ttype: 'inline'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmainClass: 'mfp-fade',\r\n\t\t\t\t\t\t\tremovalDelay: 300\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tform.find('input[name=\"phone\"]').val(null);\r\n\t\t\t\t\t\tform.find('input[name=\"email\"]').val(null);\r\n\r\n\t\t\t\t\t\tsetTimeout(autoClosePopup, 2000);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif(data.ERROR !== \"\"){\r\n\t\t\t\t\t\t\topenErrorPopup();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tform.find(':submit').removeAttr('disabled');\r\n\t\t\t\t},\r\n\t\t\t\terror: function (data) {\r\n\t\t\t\t\topenErrorPopup();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};*/\r\n\r\n\tfunction openProductModal (event) {\r\n\t\t$('.js-form').off('submit');\r\n\r\n\t\tvar productInfo = productsData.filter(function (elem) {\r\n\t\t\treturn elem.id === event.currentTarget.getAttribute('data-id');\r\n\t\t});\r\n\r\n\t\tvar popupMarkup = $('#product-popup-markup').html();\r\n\r\n\t\t$.magnificPopup.open({\r\n\t\t\titems: productInfo,\r\n\t\t\ttype: 'inline',\r\n\t\t\tinline: {\r\n\t\t\t\tmarkup: popupMarkup\r\n\t\t\t},\r\n\t\t\tmainClass: 'mfp-fade',\r\n\t\t\tremovalDelay: 300,\r\n\t\t\tfixedContentPos: true,\r\n\t\t\tfixedBgPos: true\r\n\t\t});\r\n\r\n\t\t//addEventListenerToForms();\r\n\r\n\t\t// prevent click handler for touch screens\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\t$('.detailed-product').on('click', openProductModal);\r\n});\r\n\r\n\r\n// Яндекс карта\r\nymaps.ready(init);\r\nvar map;\r\n\r\nfunction init() {\r\n\tmap = new ymaps.Map('map', {\r\n\t\tcenter: [59.900946, 30.353367],\r\n\t\tzoom: 17,\r\n\t\tcontrols: []\r\n\t});\r\n\r\n\tvar balloonLayout = ymaps.templateLayoutFactory.createClass(\r\n\t\t\t'<div class=\"map__balloon-wrapper\">' +\r\n\t\t\t'<div class=\"map__balloon\">' +\r\n\t\t\t'<span class=\"map__balloon-title\">Головной офис</span>' +\r\n\t\t\t'<p class=\"map__balloon-address\">г. Санкт-Петербург, <br>' +\r\n\t\t\t'Камчатская улица, д. 13А</p>' +\r\n\t\t\t'</div>' +\r\n\t\t\t'<div class=\"map__balloon-triangle\"></div>' +\r\n\t\t\t'</div>'\r\n\t);\r\n\r\n\tvar placemark = new ymaps.Placemark([59.900556, 30.350434], {}, {\r\n\t\thideIconOnBalloonOpen: true,\r\n\t\tballoonLayout: balloonLayout,\r\n\t\tballoonOffset: [-40, -140]\r\n\t});\r\n\r\n\tmap.geoObjects.add(placemark);\r\n\tmap.behaviors.disable('scrollZoom');\r\n\tplacemark.balloon.open();\r\n}\r\n"]}